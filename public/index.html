<html ng-app="app" ng-init="isSearch = true">
  <head>
    <title>PLST</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="640">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <meta http-equiv="cleartype" content="on">

    <link href='http://fonts.googleapis.com/css?family=Lato:100,400,900,100italic,400italic,900italic' rel='stylesheet' type='text/css'>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/foundation.min.css">
    <link rel="stylesheet" type="text/css" href="/css/cooldown.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">

    <script type="text/javascript" src="http://cdn-files.deezer.com/js/min/dz.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-animate.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular-touch.js"></script>


    <script type="text/javascript" src="/socket.io/socket.io.js"></script>

    <script type="text/javascript" src="/js/main.js"></script>

    <script type="text/javascript" src="/js/services/socket.js"></script>
    <script type="text/javascript" src="/js/services/cooldowns.js"></script>
    <script type="text/javascript" src="/js/services/tracks.js"></script>

    <script type="text/javascript" src="/js/directives/cooldown.js"></script>

    <script type="text/javascript" src="/js/controllers/playlist.js"></script>
    <script type="text/javascript" src="/js/controllers/search.js"></script>

  </head>

  <body>
    <div id="dz-root"></div>

<!--     <form id="searchForm">
      <div class="row collapse">
        <div class="small-9 columns">
          <input id="search" type="text" placeholder="Search"/>
        </div>
        <div class="small-3 columns">
          <input type="submit" value="Rechercher" class="button postfix"/>
        </div>
      </div>
    </form> -->

    <div class="row">
      <h2 class="main-title">
        plst
        <i class="fa fa-search" ng-click="isSearch = true" ng-show="!isSearch"></i>
        <i class="fa fa-bars" ng-click="isSearch = false" ng-show="isSearch"></i>
      </h2>
    </div>


    <!-- Search -->
    <div ng-controller="SearchCtrl" ng-show="isSearch">

        <div class="row collapse">
          <div class="small-9 columns">
            <input type="search" placeholder="Ajouter un morceau" ng-model="query"/>
          </div>
          <div class="small-3 columns">
            <input type="submit" value="Go" class="button postfix" ng-click="doSearch()"/>
          </div>
        </div>

        <div class="row" ng-hide="searching">
        </div>

        <ul class="search-results row">
          <li ng-repeat="track in results" class="track">
            <div class="front row">

              <div class="small-3 columns add">
                <i class="fa fa-plus-circle" ng-click="addTrack(track)"></i>
              </div>

              <div class="small-9 columns track-details">
                <em>{{ track.artist.name }}</em>
                <strong>{{ track.title }}</strong>
              </div>

            </div>
          </li>
        </ul>

      </div>

    </div>


    <!-- Playlist -->

    <ul id="results" ng-controller="PlaylistCtrl" class="row" ng-show="!isSearch">
      <li ng-repeat="track in playlist | orderBy:'score':true" class="track small-12 columns" ng-class="(currentTrack === track) ? 'slide' : ''" ng-swipe-right="openSlide(track)" ng-swipe-left="closeSlide()">

          <div class="toggle-switch">
            <cooldown cooldown="track.cooldown" ng-click="track.cooldown.use()" size="40"></cooldown>
          </div>

          <div class="back">
            <div class="cooldowns">
              <cooldown 
                ng-repeat="cooldown in hiddenCooldowns" 
                cooldown = "cooldown"
                ng-click="cooldown.use(track)"
                size="40">
              </cooldown>
            </div>
          </div>

          <div class="front row"  ng-click="toggleSlide(track)">

            <div class="small-3 columns score">
              <span>{{ track.score }}</span>
            </div>

            <div class="small-9 columns track-details">
              <em>{{ track.artist }}</em>
              <strong>{{ track.title }}</strong>
            </div>

          </div>


        </div>
      </li>
    </ul>

  </body>
</html>
